<!-- Attack + recovery event feed — SOC-style alert log that follows the full scenario -->
<div class="p-5 rounded-xl backdrop-blur-sm transition-colors duration-500"
     :class="{
         'border border-red-900/50 bg-gray-900/80': feedPhase === 'attack',
         'border border-cyan-900/50 bg-gray-900/80': feedPhase === 'recovery',
         'border border-emerald-900/50 bg-gray-900/80': feedPhase === 'resolved',
     }">

    <!-- Dynamic header — changes with feedPhase -->
    <div class="flex items-center gap-3 mb-4">
        <!-- Pulsing dot: red during attack, cyan during recovery, solid green when resolved -->
        <span class="relative flex h-3 w-3">
            <!-- Attack phase: pulsing red -->
            <template x-if="feedPhase === 'attack' && running">
                <span>
                    <span class="animate-ping absolute inline-flex h-full w-full rounded-full bg-red-500 opacity-75"></span>
                    <span class="relative inline-flex rounded-full h-3 w-3 bg-red-600"></span>
                </span>
            </template>
            <!-- Recovery phase: pulsing cyan -->
            <template x-if="feedPhase === 'recovery'">
                <span>
                    <span class="animate-ping absolute inline-flex h-full w-full rounded-full bg-cyan-500 opacity-75"></span>
                    <span class="relative inline-flex rounded-full h-3 w-3 bg-cyan-600"></span>
                </span>
            </template>
            <!-- Resolved: solid green -->
            <template x-if="feedPhase === 'resolved'">
                <span>
                    <span class="relative inline-flex rounded-full h-3 w-3 bg-emerald-500"></span>
                </span>
            </template>
            <!-- Attack detected but not yet recovering -->
            <template x-if="feedPhase === 'attack' && !running">
                <span>
                    <span class="relative inline-flex rounded-full h-3 w-3 bg-red-800"></span>
                </span>
            </template>
        </span>

        <h3 class="text-sm font-bold uppercase tracking-wider transition-colors duration-300"
            :class="{
                'text-red-400': feedPhase === 'attack',
                'text-cyan-400': feedPhase === 'recovery',
                'text-emerald-400': feedPhase === 'resolved',
            }">
            <span x-show="feedPhase === 'attack'">Attack In Progress</span>
            <span x-show="feedPhase === 'recovery'">Dell Cyber Recovery Active</span>
            <span x-show="feedPhase === 'resolved'">Incident Resolved</span>
        </h3>
    </div>

    <!-- Event rows -->
    <div class="space-y-1.5 max-h-[400px] overflow-y-auto">
        <template x-for="(evt, idx) in attackEvents" :key="idx">
            <div class="flex items-start gap-3 text-xs p-2.5 rounded-lg bg-gray-800/60 border border-gray-700/50"
                 x-transition:enter="transition ease-out duration-300"
                 x-transition:enter-start="opacity-0 translate-y-2"
                 x-transition:enter-end="opacity-100 translate-y-0">

                <!-- Timestamp -->
                <span class="font-mono text-gray-500 shrink-0 pt-0.5" x-text="evt.time"></span>

                <!-- Severity badge -->
                <span class="shrink-0 px-1.5 py-0.5 rounded text-[10px] font-bold uppercase"
                      :class="{
                          'bg-red-500/20 text-red-400 border border-red-500/30':       evt.severity === 'CRITICAL',
                          'bg-amber-500/20 text-amber-400 border border-amber-500/30':  evt.severity === 'HIGH',
                          'bg-purple-500/20 text-purple-300 border border-purple-500/30': evt.severity === 'BUSINESS',
                          'bg-cyan-500/20 text-cyan-400 border border-cyan-500/30':     evt.severity === 'RECOVERY',
                          'bg-emerald-500/20 text-emerald-400 border border-emerald-500/30': evt.severity === 'RESOLVED',
                      }"
                      x-text="evt.severity === 'BUSINESS' ? 'IMPACT' : evt.severity">
                </span>

                <!-- System name -->
                <span class="font-mono font-bold shrink-0 w-28"
                      :class="{
                          'text-gray-300': evt.severity !== 'RECOVERY' && evt.severity !== 'RESOLVED',
                          'text-cyan-300': evt.severity === 'RECOVERY',
                          'text-emerald-300': evt.severity === 'RESOLVED',
                      }"
                      x-text="evt.system"></span>

                <!-- Description -->
                <span :class="{
                          'text-gray-400': evt.severity !== 'RECOVERY' && evt.severity !== 'RESOLVED',
                          'text-cyan-300/80': evt.severity === 'RECOVERY',
                          'text-emerald-300/80': evt.severity === 'RESOLVED',
                      }"
                      x-text="evt.message"></span>
            </div>
        </template>
    </div>
</div>
